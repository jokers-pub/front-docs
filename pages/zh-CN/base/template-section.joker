<template>
    <div ref="container" class="joker-demo-container">
        <h2>åŒºå—æ¸²æŸ“</h2>
        <p>è¯¥ç« èŠ‚ä¸»è¦ä»‹ç»çˆ¶å­ç»„ä»¶ä¼ å€¼çš„å¦ä¸€ç§å½¢å¼ã€‚</p>
        <h3>ä»€ä¹ˆæ˜¯åŒºå—æ¸²æŸ“</h3>
        <p>
            çˆ¶å­ç»„ä»¶é™¤äº†ä½¿ç”¨
            <code>props</code>
            å»ä¼ é€’å‚æ•°å¤–ï¼Œæˆ‘ä»¬ä¹Ÿæä¾›å¦ä¸€ç§å½¢å¼çš„ä¼ å€¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€æ®µ
            <strong>å¾…æ¸²æŸ“ï¼ˆRenderï¼‰</strong>
            çš„å†…å®¹ä¼ é€’åˆ°å­ç»„ä»¶ï¼Œå¹¶ç”±å­ç»„ä»¶å†³å®šè¯¥æ¸²æŸ“æ¨¡æ¿ä»€ä¹ˆæ—¶æœºã€ä»€ä¹ˆä½ç½®è¿›è¡Œæ¸²æŸ“ã€‚
        </p>
        <pre><code class="language-html">&lt;my-component&gt; æˆ‘æ˜¯ä¸€ä¸ªå¾…æ¸²æŸ“çš„å†…å®¹ &lt;/my-component&gt;
</code></pre>
        <p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¯ä»¥åœ¨è‡ªå®šä¹‰ç»„ä»¶æ ‡ç­¾å†…å®¹åŒºå—å†…æ¥æŒ‡å®šæˆ‘ä»¬å¾…æ¸²æŸ“çš„æ¨¡æ¿åŒºå—å†…å®¹ã€‚</p>
        <h3>å¦‚ä½•ä½¿ç”¨</h3>
        <p>
            æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç»„ä»¶æ ‡ç­¾å†…æ¥å®šä¹‰
            <code>å¾…æ¸²æŸ“åŒºå—</code>
            çš„å†…å®¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨
            <code>section</code>
            æŒ‡ä»¤æ¥å®šä¹‰ï¼Œå½“æˆ‘ä»¬åªæœ‰ä¸€ä¸ªå¾…æ¸²æŸ“åŒºå—ï¼Œå¹¶ä¸”æ²¡æœ‰æ¸²æŸ“å‚æ•°æ—¶ï¼Œè¯¥æŒ‡ä»¤å¯ä»¥è¢«çœç•¥ã€‚
        </p>
        <pre><code class="language-xml">&lt;my-component&gt;
    &lt;p&gt;æˆ‘æ˜¯ä¸€ä¸ªå¾…æ¸²æŸ“çš„åŒºå—æ¨¡æ¿&lt;/p&gt;
&lt;/my-component&gt;

ğŸ‘‡ğŸ‘‡ğŸ‘‡ç­‰åŒäºğŸ‘‡ğŸ‘‡ğŸ‘‡
&lt;my-component&gt;
    @section(){
        &lt;p&gt;æˆ‘æ˜¯ä¸€ä¸ªå¾…æ¸²æŸ“çš„åŒºå—æ¨¡æ¿&lt;/p&gt;
    }
&lt;/my-component&gt;

ğŸ‘‡ğŸ‘‡ğŸ‘‡ç­‰åŒäºğŸ‘‡ğŸ‘‡ğŸ‘‡

&lt;my-component&gt;
    @section('default'){
        &lt;p&gt;æˆ‘æ˜¯ä¸€ä¸ªå¾…æ¸²æŸ“çš„åŒºå—æ¨¡æ¿&lt;/p&gt;
    }
&lt;/my-component&gt;
</code></pre>
        <p>
            è‹¥æˆ‘ä»¬ä¸æŒ‡å®šåŒºå—åç§°ï¼Œåˆ™é»˜è®¤ä¸º
            <strong>default</strong>
            ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰å¤šä¸ªå¾…æ¸²æŸ“åŒºå—ï¼š
        </p>
        <pre><code class="language-xml">&lt;my-component&gt;
    &lt;p&gt;æˆ‘æ˜¯ä¸€ä¸ªå¾…æ¸²æŸ“çš„é»˜è®¤åŒºå—æ¨¡æ¿&lt;/p&gt;

    @section('top'){
        &lt;p&gt;æˆ‘æ˜¯ä¸€ä¸ªå¾…æ¸²æŸ“çš„TopåŒºå—æ¨¡æ¿&lt;/p&gt;
    }

    &lt;p&gt;æˆ‘æ˜¯ä¸€ä¸ªå¾…æ¸²æŸ“çš„é»˜è®¤åŒºå—æ¨¡æ¿ï¼ˆç¬¬äºŒæ¡ï¼‰&lt;/p&gt;

    @section('bottom'){
        &lt;p&gt;æˆ‘æ˜¯ä¸€ä¸ªå¾…æ¸²æŸ“çš„BottomåŒºå—æ¨¡æ¿&lt;/p&gt;
    }
&lt;/my-component&gt;
</code></pre>
        <p>
            æˆ‘ä»¬ä¼šå°†
            <strong>å…·æœ‰åå­—</strong>
            çš„æ¸²æŸ“åŒºå—åˆå¹¶åœ¨ä¸€èµ·ï¼Œç»„æˆè¯¥åç§°ä¸‹çš„æ¸²æŸ“å†…å®¹ï¼Œå°†æœªæŒ‡å®šåç§°çš„æ¸²æŸ“åŒºå—ç»Ÿä¸€åˆå¹¶ä¸º
            <code>default</code>
            åŒºå—ã€‚
        </p>
        <p>æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹å…·ä½“æ‰§è¡Œæ•ˆæœï¼š</p>
        <DemoContainer component="@(components.DEMO_JOKER_demo1)">
            <pre><code class="language-html">&lt;template&gt;
    &lt;MyComponent&gt;
        &lt;p&gt;I'm the default rendering block (1)&lt;/p&gt;
        @section(&quot;top&quot;) {
            &lt;p&gt;I'm the top rendering block&lt;/p&gt;
        }
        &lt;p&gt;I'm the default rendering block (2)&lt;/p&gt;
        @section(&quot;bottom&quot;) {
            &lt;p&gt;I'm the bottom rendering block&lt;/p&gt;
        }
    &lt;/MyComponent&gt;
&lt;/template&gt;
&lt;script&gt;
import { Component } from &quot;@joker.front/core&quot;;
import MyComponent from &quot;./children.joker&quot;;

export default class extends Component {
    components = {
        MyComponent
    };
}
&lt;/script&gt;

</code></pre>
        </DemoContainer>
        <p>ç»“åˆä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å­ç»„ä»¶æ˜¯å¦‚ä½•æ¸²æŸ“è¿™äº›åŒºå—çš„ï¼Œä»¥ä¸‹æ˜¯å­ç»„ä»¶ä»£ç ï¼š</p>
        <pre><code class="language-html">&lt;template&gt;
    &lt;p class=&quot;title&quot;&gt;TopåŒºå—å†…å®¹ï¼š&lt;/p&gt;
    @RenderSection(&quot;top&quot;)
    &lt;p class=&quot;title&quot;&gt;æ­£æ–‡å†…å®¹ï¼š&lt;/p&gt;
    @RenderSection()
    &lt;p class=&quot;title&quot;&gt;BottomåŒºå—å†…å®¹ï¼š&lt;/p&gt;
    @RenderSection(&quot;bottom&quot;)
&lt;/template&gt;

&lt;style lang=&quot;scss&quot; scoped&gt;
    p.title {
        font-size: 18px;
        font-weight: bold;
        margin-top: 10px;
    }
&lt;/style&gt;
</code></pre>
        <p>
            é€šè¿‡ä¸Šé¢ä»£ç å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬é€šè¿‡
            <code>RenderSection</code>
            API ï¼Œæ—¢å¯ä»¥å®ç°å¾…æ¸²æŸ“åŒºå—æ¨¡æ¿çš„æ¸²æŸ“ã€‚å¯ä»¥é€šè¿‡æŒ‡å®šç¬¬ä¸€ä¸ªå‚æ•°æ¥æ¸²æŸ“ä¸åŒçš„åŒºå—æ¨¡æ¿ï¼Œè‹¥ä¸ä¼ é€’åŒºå—åç§°ï¼Œé»˜è®¤æ¸²æŸ“
            <strong>default</strong>
            åŒºå—ã€‚
        </p>
        <h3>åŒºå—æ“ä½œ</h3>
        <p>
            å¦‚æœä½ æ˜¯åœ¨å¼€å‘ç»„ä»¶æ—¶ï¼Œä½ å¯èƒ½ä¼šéœ€è¦åˆ¤æ–­åœ¨è°ƒç”¨è¯¥ç»„ä»¶æ—¶ï¼Œæ˜¯å¦ä¼ å…¥äº†å¾…æ¸²æŸ“æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨
            <a href="/base/component-property" target="_blank">ç»„ä»¶å±æ€§</a>
            ä¸­çš„
            <code>$sections</code>
            æ¥è¿›è¡Œåˆ¤æ–­ï¼Œä¾‹å¦‚ï¼š
        </p>
        <pre><code class="language-xml">&lt;div&gt;
    @if($sections.default){
        &lt;p&gt;@RenderSection()&lt;/p&gt;
    }
    else{
        &lt;p class=&quot;default&quot;&gt;é»˜è®¤ä¿¡æ¯&lt;/p&gt;
    }
&lt;/div&gt;
</code></pre>
        <p>é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å°±å¯ä»¥åšåˆ°ï¼Œå¦‚æœä¼ å…¥å¾…æ¸²æŸ“åŒºå—æ¨¡æ¿ï¼Œå°±æ¸²æŸ“æ¨¡æ¿ï¼Œå¦åˆ™å±•ç¤ºé»˜è®¤æç¤ºä¿¡æ¯ã€‚</p>
        <h3>æ¸²æŸ“å‚æ•°</h3>
        <p>
            åœ¨æ¸²æŸ“æ¨¡æ¿çš„è¿‡ç¨‹ä¸­ï¼ŒæŸäº›æƒ…å†µä¸‹éœ€è¦ä¼ é€’å…³é”®æ•°æ®ï¼Œå°¤å…¶æ˜¯åœ¨ä½¿ç”¨åˆ—è¡¨ç»„ä»¶æ—¶ã€‚æˆ‘ä»¬ä¸ä»…éœ€è¦æä¾›åˆ—è¡¨é¡¹çš„æ¸²æŸ“æ¨¡æ¿ï¼Œè¿˜å¿…é¡»ä¸ºå¾ªç¯ä¸­çš„æ¯ä¸€é¡¹æä¾›ç›¸åº”çš„æ•°æ®ï¼Œä»¥ç¡®ä¿æ¸²æŸ“è¿‡ç¨‹èƒ½å¤Ÿé¡ºåˆ©è¿›è¡Œã€‚
        </p>
        <p>æˆ‘ä»¬çš„ä¼ é€’å‚æ•°éå¸¸ç›´è§‚ï¼Œæˆ‘ä»¬åˆ†ä¸ºä¼ å‚å’Œæ¥æ”¶å‚æ•°ä¸¤ä¸ªä»£ç ç‰‡æ®µæ¥ä»‹ç»ä¸‹è¯­æ³•è§„åˆ™ï¼Œé¦–å…ˆæ˜¯ä¼ é€’å‚æ•°ï¼š</p>
        <pre><code class="language-xml">&lt;p&gt;
    @RenderSection('default','æˆ‘æ˜¯å‚æ•°1',æˆ‘æ˜¯å˜é‡,...)
&lt;/p&gt;
</code></pre>
        <p>
            å€¼çš„æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœéœ€è¦ä¼ é€’å‚æ•°ï¼Œå‚æ•°æ˜¯ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹çš„ï¼Œè¿™ä¹Ÿå°±ä»¥ä¸ºç€æˆ‘ä»¬ä¸€å®šè¦è¡¨æ˜æˆ‘ä»¬çš„åŒºå—åç§°ï¼Œå‚æ•°å¯ä»¥æ˜¯é™æ€å€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ç»„ä»¶çš„å±æ€§ã€‚
        </p>
        <p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹åœ¨çˆ¶ç»„ä»¶å¦‚ä½•æ¥æ”¶å­ç»„ä»¶é€šè¿‡åŒºå—æ¸²æŸ“ä¼ é€’çš„å‚æ•°ï¼š</p>
        <pre><code class="language-xml">&lt;my-component&gt;
@section('default',v1,v2,v3){
    &lt;p&gt;å‚æ•°1ï¼š@v1&lt;/p&gt;
    &lt;p&gt;å‚æ•°2ï¼š@v2&lt;/p&gt;
}
&lt;/my-component&gt;
</code></pre>
        <p>
            é€šè¿‡ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œå’Œä¼ é€’å‚æ•°ä¸€æ ·ï¼Œæˆ‘ä»¬çš„å‚æ•°ä¹Ÿæ˜¯ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹çš„ï¼Œå‚æ•°ä¸ªæ•°å’Œé¡ºåºå¯¹åº”ä¼ é€’å‚æ•°æ—¶çš„è§„åˆ™ã€‚
        </p>
        <p>æ¥ä¸‹æ¥çœ‹ä¸€ä¸ªè¿è¡Œçš„ç¤ºä¾‹ï¼š</p>
        <DemoContainer component="@(components.DEMO_JOKER_demo2)">
            <pre><code class="language-html">&lt;template&gt;
    &lt;DemoRow&gt;
        &lt;p&gt;This is an example without passing a section:&lt;/p&gt;
        &lt;ListComponent list=&quot;@list&quot;&gt;&lt;/ListComponent&gt;
    &lt;/DemoRow&gt;
    &lt;DemoRow&gt;
        &lt;p&gt;This is an example of passing a section:&lt;/p&gt;
        &lt;ListComponent list=&quot;@list&quot;&gt;
            @section(&quot;default&quot;, userName) {
                &lt;span&gt;Name: &lt;b&gt;@userName&lt;/b&gt;&lt;/span&gt;
            }
        &lt;/ListComponent&gt;
    &lt;/DemoRow&gt;
&lt;/template&gt;
&lt;script&gt;
import { Component } from &quot;@joker.front/core&quot;;
import ListComponent from &quot;./list-component.joker&quot;;

export default class extends Component {
    components = {
        ListComponent
    };

    list = [&quot;Zhang San&quot;, &quot;Li Si&quot;, &quot;Wang Wu&quot;];
}
&lt;/script&gt;
</code></pre>
        </DemoContainer>
        <p>
            ä»¥ä¸‹æ˜¯
            <code>list-component</code>
            çš„ç»„ä»¶ç¤ºä¾‹ä»£ç ï¼š
        </p>
        <pre><code class="language-xml">&lt;template&gt;
    &lt;ul&gt;
        @for(let item of props.list) {
            &lt;li&gt;
                @if($sections.default) {
                    @RenderSection(&quot;default&quot;, item)
                }
                else {
                    @item
                }
            &lt;/li&gt;
        }
    &lt;/ul&gt;
&lt;/template&gt;
</code></pre>
        <h3>è·¨ç»„ä»¶ä¼ é€’ï¼ˆé«˜é˜¶ï¼‰</h3>
        <p>
            å½“æœ‰äº›å¤æ‚çš„ç»„ä»¶å¼€å‘ä¸­ï¼Œçˆ¶ç»„ä»¶ä¼ å…¥çš„å¾…æ¸²æŸ“åŒºå—æ¨¡æ¿ï¼Œä¸ä¸€å®šè¦æ˜¯è¯¥ç»„ä»¶å»æ‰§è¡Œæ¸²æŸ“ï¼Œå¯èƒ½ä¼šç»§ç»­å‘ä¸‹ä¼ é€’ï¼Œç”±æ·±å±‚ç»„ä»¶å»æ‰§è¡Œæ¨¡æ¿çš„æ¸²æŸ“ï¼Œé‚£è¿™æ ·æˆ‘ä»¬å°±éœ€è¦åŒºå—æ¨¡æ¿çš„
            <code>è·¨ç»„ä»¶ä¼ é€’</code>
            äº†ã€‚
        </p>
        <p>
            é¦–å…ˆæˆ‘ä»¬å…ˆäº†è§£ä¸‹
            <code>RenderSection</code>
            APIï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥æ˜¯
            <strong>string</strong>
            ï¼Œä¹Ÿå¯ä»¥æ˜¯
            <code>SectionType</code>
            ï¼ˆå¯ä»¥å»
            <a href="/base/component-property" target="_blank">ç»„ä»¶å±æ€§</a>
            ä¸­çš„
            <code>$sections</code>
            å»äº†è§£ï¼‰ï¼Œæ—¢ç„¶åŒºå—å¯¹è±¡å¯ä»¥è¢«ä¼ é€’ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼æ¥å®ç°è·¨ç»„ä»¶çš„åŒºå—æ¸²æŸ“äº†ï¼š
        </p>
        <pre><code class="language-xml">&lt;template&gt;
    @RenderSection(topSection,'æˆ‘æ˜¯å‚æ•°')
&lt;/template&gt;
</code></pre>
        <pre><code class="language-ts">class extends Component{
    get topSection(){
        //å‘ä¸ŠæŸ¥æ‰¾ï¼Œå¹¶æ‹¿åˆ°è¦æ¸²æŸ“çš„æ’æ§½
        return this.$rootVNode.closest(...)?.component.$sections.top;

        //å½“ç„¶ä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’
        return this.props.topSection;
    }
}
</code></pre>
        <BottomNav />
    </div>
</template>

<script>
import { Component } from "@joker.front/core";
import hljs from "highlight.js/lib/common";
import BottomNav from "../../../common/components/bottom-nav.joker";
import DEMO_JOKER_demo2 from "../../../examples/base/template-section/demo2.joker";
import DEMO_JOKER_demo1 from "../../../examples/base/template-section/demo1.joker";
export default class extends Component {
    components = {
        BottomNav,
        DEMO_JOKER_demo2,
        DEMO_JOKER_demo1
    };
    mounted() {
        let container = this.$getRef("container")?.output!;
        container.querySelectorAll("pre code").forEach((el: HTMLElement) => {
            hljs.highlightElement(el);
        });
    }
}

</script>